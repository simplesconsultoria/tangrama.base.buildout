[buildout]
parts +=
    supervisor
    supervisor-cron

[supervisor]
recipe = collective.recipe.supervisor
plugins =
    supervisor>=3.0
    superlance
port = ${ports:supervisor}
user = ${supervisor-settings:user}
password = ${supervisor-settings:password}
serverurl = http://${hosts:supervisor}:${ports:supervisor}
programs =
    10 zeo        (autostart=true  startsecs=15)  ${buildout:directory}/parts/zeo/bin/runzeo                          true ${users:os}
    20 instance   (autostart=true  startsecs=30)  ${buildout:directory}/bin/instance  [console] ${instance:location}  true ${users:os}
    20 instance1  (autostart=true  startsecs=30)  ${buildout:directory}/bin/instance1 [console] ${instance1:location} true ${users:os}

eventlisteners =
        memmon TICK_60 ${buildout:bin-directory}/memmon [-g production=296MB -m hosting+alert@simplesconsultoria.com.br]
groups =
        20 production instance,instance1

logfile = ${buildout:directory}/var/log/supervisord.log
logfile_maxbytes = 5MB
logfile_backups = 10
loglevel = info
pidfile = ${buildout:directory}/var/supervisord.pid
nodaemon = false

[supervisor-cron]
recipe = z3c.recipe.usercrontab
times = @reboot
command = ${buildout:directory}/bin/supervisord
