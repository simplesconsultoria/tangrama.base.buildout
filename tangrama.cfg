[buildout]
extends = 
    buildout.d/haproxy.cfg
    buildout.d/supervisor.cfg
    buildout.d/maintenance.cfg

eggs +=
    munin.zope
    enfold.getsentrylog

zcml +=
    munin.zope

allow-hosts = *

[zeo]
recipe = plone.recipe.zope2zeoserver
zeo-address = ${hosts:zeoserver}:${ports:zeoserver}
zope2-location = ${zope2:location}
blob-storage = ${zeo:zeo-var}/blobstorage
zeo-var = ${buildout:directory}/var
eggs =
    ZODB3
    plone.app.blob
zeo-conf-additional =
     %import tempstorage
     <temporarystorage temp>
         name temporary storage for sessioning
     </temporarystorage>

[instance]
port-base = 0
z2-log = off
zodb-cache-size = 30000
zserver-threads = 1
zeo-client-cache-size = 1024MB
zeo-client = on
zeo-address = ${zeo:zeo-address}
blob-storage = ${zeo:blob-storage}
shared-blob = on
environment-vars =
    CHAMELEON_CACHE ${buildout:directory}/var/chameleon-cache
    CHAMELEON_DEBUG false
    CHAMELEON_RELOAD true
    CHAMELEON_EAGER true
    PYTHON_EGG_CACHE ${buildout:directory}/var/.python-eggs
    PTS_LANGUAGES en, pt-br
    zope_i18n_allowed_languages en, pt_BR
    zope_i18n_compile_mo_files true
    TEMP ${buildout:directory}/tmp
    TMP ${buildout:directory}/tmp
zodb-temporary-storage =
     <zodb_db temporary>
         mount-point /temp_folder
         cache-size 10000
         container-class Products.TemporaryFolder.TemporaryContainer
         <zeoclient>
           server ${zeo:zeo-address}
           storage temp
           var ${buildout:directory}/var/filestorage
           cache-size 1024MB
         </zeoclient>
     </zodb_db>

[instance1]
<=instance
port-base = 1
